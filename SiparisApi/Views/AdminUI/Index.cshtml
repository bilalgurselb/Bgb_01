@{
    ViewData["Title"] = "Yönetim Paneli";
}

<div class="container mt-4">
    <h2 class="text-primary fw-bold mb-4">Yönetim Paneli</h2>

    <div class="row g-3">
        <!-- Sistem Sağlığı -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title text-secondary">Sistem Durumu</h6>
                        <h5 class="fw-bold @(ViewBag.HealthStatus == "Healthy" ? "text-success" : "text-danger")">
                            @ViewBag.HealthStatus
                        </h5>
                    </div>
                    <i class="bi @(ViewBag.HealthStatus == "Healthy" ? "bi-heart-pulse text-success" : "bi-exclamation-triangle text-danger") fs-3"></i>
                </div>
            </div>
        </div>

        <!-- Kullanıcı Sayısı -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title text-secondary">Kayıtlı Kullanıcılar</h6>
                        <h5 class="fw-bold text-primary">@ViewBag.UserCount</h5>
                    </div>
                    <i class="bi bi-people-fill text-primary fs-3"></i>
                </div>
            </div>
        </div>

        <!-- Log Sayısı -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title text-secondary">Toplam Log Kaydı</h6>
                        <h5 class="fw-bold text-warning">@ViewBag.LogCount</h5>
                    </div>
                    <i class="bi bi-journal-text text-warning fs-3"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Son Loglar -->
    <div class="card shadow-sm border-0 mt-4">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <span><i class="bi bi-clock-history me-2"></i> Son 10 Log Kaydı</span>
            <a href="/AdminUI/Logs" class="btn btn-light btn-sm">Tüm Logları Gör</a>
        </div>
        <div class="card-body p-0">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Kullanıcı</th>
                        <th>İşlem</th>
                        <th>Endpoint</th>
                        <th>Tarih</th>
                        <th>Detay</th>
                    </tr>
                </thead>
                <tbody>
                    @if (ViewBag.RecentLogs != null && ((List<SiparisApi.Models.Log>)ViewBag.RecentLogs).Any())
                    {
                        foreach (var log in (List<SiparisApi.Models.Log>)ViewBag.RecentLogs)
                        {
                            <tr>
                                <td>@log.UserEmail</td>
                                <td>@log.Action</td>
                                <td>@log.Endpoint</td>
                                <td>@log.Timestamp.ToString("dd.MM.yyyy HH:mm")</td>
                                <td>@log.Details</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5" class="text-center text-muted py-3">Henüz log kaydı bulunmuyor.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
